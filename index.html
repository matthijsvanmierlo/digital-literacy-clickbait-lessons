<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Investigation Simulation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .widget-container {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            max-width: 800px; /* Increased width */
            margin: 0 auto;
            overflow: hidden;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .news-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        /* Simulating a "Viral Post" look */
        .viral-tag {
            background: linear-gradient(135deg, #ef4444 0%, #b91c1c 100%);
            color: white;
            padding: 4px 12px;
            font-size: 0.75rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            display: inline-block;
            border-radius: 4px;
        }

        .news-headline {
            font-family: 'Georgia', serif;
            font-weight: 700;
            line-height: 1.25;
        }

        /* Fade animation for switching cards */
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-100 p-6 flex items-center justify-center min-h-screen">

    <div class="widget-container w-full">
        
        <div class="bg-slate-900 text-white p-5 border-b border-slate-700">
            <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6">
                <div class="flex items-center gap-2">
                    <i data-lucide="eye" class="text-blue-400"></i>
                    <h2 class="text-lg font-bold tracking-wide">SCENARIO VIEWER</h2>
                </div>
                
                <div class="flex items-center gap-3">
                    <button id="info-btn" class="flex items-center gap-1.5 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold px-3 py-1.5 rounded transition-colors border border-blue-500 shadow-sm" aria-label="View Mission Info">
                        <i data-lucide="info" class="w-3.5 h-3.5"></i>
                        <span>MISSION INFO</span>
                    </button>

                    <div class="flex items-center gap-2 bg-slate-800 rounded px-2 py-1 border border-slate-700">
                        <label for="grade-select" class="text-xs text-slate-400 font-mono uppercase">Class Level:</label>
                    <select id="grade-select" class="bg-transparent text-white font-bold text-sm focus:outline-none cursor-pointer">
                        <option value="6">GRADE 6</option>
                        <option value="7">GRADE 7</option>
                        <option value="8">GRADE 8</option>
                    </select>
                </div>
            </div>

            <label class="text-xs font-bold text-slate-400 uppercase tracking-wider block mb-2">Select Investigation Target:</label>
            <div class="relative text-slate-800">
                <select id="scenario-select" class="w-full p-3 pr-10 rounded-lg bg-slate-100 border-2 border-slate-200 focus:border-blue-500 focus:ring-0 font-medium cursor-pointer appearance-none transition-colors">
                    </select>
                <div class="absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-slate-500">
                    <i data-lucide="chevron-down" class="w-5 h-5"></i>
                </div>
            </div>
        </div>

        <div id="card-container" class="p-6 bg-slate-50">
            
            <div class="news-card shadow-md mb-6 fade-in">
                
                <div class="relative bg-gray-200 group">
                    <img id="news-image" src="" alt="News Image" class="w-full h-auto object-contain transition-transform duration-700 group-hover:scale-105">
                    
                    <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/70 to-transparent p-4">
                        <span class="viral-tag shadow-sm">Trending Now</span>
                    </div>
                </div>

                <div class="p-5">
                    <div class="flex items-center gap-2 text-gray-500 text-xs font-medium mb-3">
                        <i data-lucide="globe" class="w-3 h-3 text-blue-500"></i>
                        <span id="source-mock" class="font-mono tracking-tight"></span>
                    </div>
                    
                    <div class="flex items-start justify-between gap-4 mb-3">
                        <h1 id="news-headline" class="news-headline text-2xl text-gray-900"></h1>
                        <button id="copy-headline-btn" class="shrink-0 p-2 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-md transition-colors" aria-label="Copy Headline">
                            <i data-lucide="copy" class="w-4 h-4"></i>
                        </button>
                    </div>
                    
                    <div class="mt-4 text-gray-600 text-sm leading-relaxed border-l-4 border-gray-300 pl-4 italic">
                        "<span id="news-desc"></span>"
                    </div>
                </div>
            </div>

            <div class="bg-blue-600 text-white rounded-lg p-5 shadow-lg flex items-start gap-4 fade-in">
                <div class="bg-white/20 p-2 rounded-full shrink-0">
                    <i data-lucide="search" class="w-6 h-6"></i>
                </div>
                <div>
                    <h3 class="font-bold text-blue-100 text-xs uppercase tracking-wider mb-1">Your Mission</h3>
                    <p id="investigation-task" class="font-semibold text-lg leading-tight"></p>
                    <p class="text-blue-200 text-sm mt-2 font-mono" id="task-subtext"></p>
                </div>
            </div>

        </div>

    </div>

    <!-- Info Modal -->
    <div id="info-modal" class="fixed inset-0 z-50 hidden" aria-hidden="true" role="dialog" aria-modal="true">
        <!-- Overlay -->
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity" id="modal-overlay"></div>

        <!-- Content -->
        <div class="relative min-h-screen sm:min-h-full flex items-center justify-center p-4">
            <div class="bg-white rounded-xl shadow-2xl max-w-lg w-full overflow-hidden transform transition-all relative top-0 sm:top-auto">
                <div class="bg-slate-900 text-white p-4 flex justify-between items-center border-b border-slate-700">
                    <h3 id="modal-title" class="font-bold text-lg tracking-wide">Mission Info</h3>
                    <button id="modal-close" class="text-slate-400 hover:text-white transition-colors" aria-label="Close Modal">
                        <i data-lucide="x" class="w-5 h-5"></i>
                    </button>
                </div>
                <div id="modal-content" class="p-6 text-slate-700 leading-relaxed">
                    <!-- Content injected via JS -->
                </div>
                <div class="bg-slate-50 p-4 border-t border-slate-100 flex justify-end">
                    <button id="modal-dismiss" class="px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-800 font-medium rounded-lg text-sm transition-colors">
                        Got it
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA REPOSITORY ---
        
        const gradeInfoData = {
            "6": {
                title: "6th Grade Mission: Shortcuts & Summaries",
                content: `
                    <p class="mb-4"><strong>Goal:</strong> Learn keyboard shortcuts and how to verify headlines using Google's AI summaries.</p>
                    <ul class="list-disc list-inside space-y-2 text-sm">
                        <li><strong>Keyboard Shortcuts:</strong> Use <code class="bg-slate-100 px-1 py-0.5 rounded border border-slate-300">Ctrl+C</code> (Copy) and <code class="bg-slate-100 px-1 py-0.5 rounded border border-slate-300">Ctrl+V</code> (Paste) to quickly search.</li>
                        <li><strong>Google Search:</strong> Paste the headline into Google.</li>
                        <li><strong>Verify:</strong> Look at the AI summary or featured snippet. Click the source link to confirm—don't just trust the summary text!</li>
                        <li><strong>Lesson:</strong> Certainty is a spectrum. How sure are you?</li>
                    </ul>
                `
            },
            "7": {
                title: "7th Grade Mission: Focused Searching",
                content: `
                    <p class="mb-4"><strong>Goal:</strong> Use advanced search operators to filter for trusted sites.</p>
                    <ul class="list-disc list-inside space-y-2 text-sm">
                        <li><strong>The "site:" Operator:</strong> Type <code class="bg-slate-100 px-1 py-0.5 rounded border border-slate-300">site:.gov</code> or <code class="bg-slate-100 px-1 py-0.5 rounded border border-slate-300">site:.edu</code> after your search terms.</li>
                        <li><strong>Why?</strong> This limits results to government or educational websites, which are usually more reliable for facts.</li>
                        <li><strong>Practice:</strong> Use this technique to verify the "investigation target."</li>
                        <li><strong>Lesson:</strong> Knowing <em>where</em> to look is as important as <em>what</em> to look for.</li>
                    </ul>
                `
            },
            "8": {
                title: "8th Grade Mission: Impact & Independence",
                content: `
                    <p class="mb-4"><strong>Goal:</strong> Analyze the harm of misinformation and create your own verification plan.</p>
                    <ul class="list-disc list-inside space-y-2 text-sm">
                        <li><strong>Harm Analysis:</strong> If this headline is false, who gets hurt? Rank scenarios from "most harmful" to "least harmful."</li>
                        <li><strong>Independent Search:</strong> You have no prompts. Decide which keywords and search methods (like <code>site:</code> or checking Snopes) are best.</li>
                        <li><strong>Lesson:</strong> We share responsibility for the information we spread.</li>
                    </ul>
                `
            }
        };

        const scenarioData = {
            "6": [
                // GRADE 6: ALL FAKE. Focus: Copy/Paste shortcuts & AI Summary verification.
                {
                    id: "6-1",
                    title: "T-Rex Cloned",
                    headline: "Genetics Breakthrough: Scientists Successfully Clone Baby T-Rex, Opening 'Park' in 2027",
                    source: "Dino-Science-Now.net",
                    time: "Viral",
                    desc: "A Florida lab claims to have hatched the first dinosaur in 65 million years using DNA from a mosquito trapped in amber.",
                    task: "Highlight and copy (Ctrl+C) this phrase: 'Scientists clone baby T-Rex Florida 2027'.",
                    subtext: "Paste (Ctrl+V) into Google. Does the AI Summary say this is real or a 'hoax'?",
                    localFilename: "grade6_dino_clone.jpg"
                },
                {
                    id: "6-2",
                    title: "Homework Ban",
                    headline: "Federal Law Update: Homework Illegal for Under-13s Starting Next Semester",
                    source: "National-Education-News.org",
                    time: "2 hrs ago",
                    desc: "Citing 'stress levels,' the Department of Education has allegedly banned all take-home assignments for middle schoolers.",
                    task: "Copy (Ctrl+C): 'Department of Education illegal homework ban'.",
                    subtext: "Paste (Ctrl+V) into Google. Check the source—is it a .gov site or a fake news site?",
                    localFilename: "grade6_homework_ban.jpg"
                },
                {
                    id: "6-3",
                    title: "Invisibility Cloak",
                    headline: "Apple Leaks: The iPhone 17 Pro Will Feature 'True Invisibility' Mode",
                    source: "Tech-Rumor-Mill.xyz",
                    time: "Trending",
                    desc: "Leaked schematics show a new 'light-bending' camera array that makes the phone completely invisible when placed on a table.",
                    task: "Copy (Ctrl+C): 'Apple iPhone 17 invisibility mode rumor'.",
                    subtext: "Paste (Ctrl+V). Look at the search results—are trusted tech sites reporting this?",
                    localFilename: "grade6_invisible_iphone.jpg"
                },
                {
                    id: "6-4",
                    title: "The Venom Myth",
                    headline: "Nature Fact: Daddy Longlegs Are Officially The Most Venomous Spiders on Earth",
                    source: "Nature-Trivia-Daily.com",
                    time: "Viral",
                    desc: "You have probably heard this rumor, but this article claims it is scientifically proven: their venom is deadlier than a Cobra's, but their fangs are too short to bite humans.",
                    task: "Copy (Ctrl+C): 'Daddy longlegs most poisonous spider myth'.",
                    subtext: "Paste (Ctrl+V). This is a classic urban legend. Does the AI Summary label it as a 'Myth' or 'False'?",
                    localFilename: "grade6_daddy_longlegs.jpg"
                },
                {
                    id: "6-5",
                    title: "Bubblegum Broccoli",
                    headline: "Agriculture News: Farmers Create 'Bubblegum Flavored' Broccoli to Help Kids Eat Veggies",
                    source: "Healthy-Eats-Viral.info",
                    time: "4 hrs ago",
                    desc: "Using CRISPR gene editing, a farm in California says they have removed the bitter taste and added a sugary gum flavor.",
                    task: "Copy (Ctrl+C): 'Bubblegum flavored broccoli gene editing'.",
                    subtext: "Paste (Ctrl+V). Does the AI Summary confirm this exists, or was it an April Fools joke?",
                    localFilename: "grade6_candy_veg.jpg"
                }
            ],
            "7": [
                // GRADE 7: TRUE & FAKE MIX. Focus: Using "site:" operators.
                {
                    id: "7-1",
                    title: "Penny Cost (TRUE)",
                    headline: "Economic Fact: It Costs the US Government More Than 1 Cent to Make a Penny",
                    source: "Financial-Times-Daily",
                    time: "Yesterday",
                    desc: "Critics say we are losing money every time we mint a coin. Is this inflation math actually true?",
                    task: "Use 'site:.gov' to verify this with the US Mint or Treasury.",
                    subtext: "Sample Search: cost to produce a penny site:.gov",
                    localFilename: "grade7_penny_cost.jpg"
                },
                {
                    id: "7-2",
                    title: "Octopus Hearts (TRUE)",
                    headline: "Biology Weirdness: Octopuses Have Three Hearts and Blue Blood",
                    source: "Ocean-Life-Facts",
                    time: "Trending",
                    desc: "It sounds like sci-fi, but this article claims the cephalopod anatomy is totally alien compared to humans.",
                    task: "Use 'site:.edu' or 'site:.org' to find a zoo or aquarium that confirms this.",
                    subtext: "Sample Search: octopus three hearts blue blood site:.edu",
                    localFilename: "grade7_octopus.jpg"
                },
                {
                    id: "7-3",
                    title: "Knuckle Cracking (FALSE)",
                    headline: "Health Warning: Cracking Your Knuckles Will Give You Arthritis",
                    source: "Wellness-Myths-Daily.com",
                    time: "Recurring",
                    desc: "Your teachers and parents have said it for years: popping your fingers causes permanent joint damage. Is it true?",
                    task: "Use 'site:.edu' (universities/hospitals) to find the medical consensus.",
                    subtext: "Sample Search: does cracking knuckles cause arthritis site:.edu",
                    localFilename: "grade7_knuckles.jpg"
                },
                {
                    id: "7-4",
                    title: "Great Wall Space (FALSE)",
                    headline: "NASA Image: The Great Wall of China is the Only Man-Made Object Visible from the Moon",
                    source: "Space-Facts-Online.net",
                    time: "Viral",
                    desc: "It is a point of pride in many textbooks, but astronauts have debated this for decades.",
                    task: "Use 'site:.gov' to check NASA's official stance on this claim.",
                    subtext: "Sample Search: Great Wall of China visible from moon site:.gov",
                    localFilename: "grade7_great_wall.jpg"
                },
                {
                    id: "7-5",
                    title: "NASA Space Pen (FALSE)",
                    headline: "History Viral: NASA Spent Millions on a 'Space Pen' While Russians Just Used Pencils",
                    source: "Tech-History-Leaks.xyz",
                    time: "Trending",
                    desc: "This popular story claims NASA wasted taxpayer money on a pen that writes in zero-g, while Soviet cosmonauts simply used pencils.",
                    task: "Use 'site:.gov' to find why NASA actually banned pencils (hint: fire/graphite dust).",
                    subtext: "Sample Search: space pen vs pencil myth site:.gov",
                    localFilename: "grade7_space_pen.jpg"
                }
            ],
            "8": [
                // GRADE 8: TRUE & FAKE MIX. Focus: Harm ranking & Independent Verification.
                {
                    id: "8-1",
                    title: "Tap Water Zombie (FALSE)",
                    headline: "CDC Emergency: 'Zombie Deer' Disease Now Transmissible to Humans via Tap Water",
                    source: "Alert-USA-News.xyz",
                    time: "BREAKING",
                    desc: "A report claims Chronic Wasting Disease (CWD) has mutated and entered the municipal water supply.",
                    task: "1. Harm: If false, this causes panic buying and fear of water. 2. Verify: Is this true?",
                    subtext: "Create your own search plan. Trusted sources only.",
                    localFilename: "grade8_zombie_deer.jpg"
                },
                {
                    id: "8-2",
                    title: "Brain Changes (TRUE)",
                    headline: "NIH Study: Excessive Screen Time Physically Changes the Structure of Pre-Teen Brains",
                    source: "Health-Science-Today",
                    time: "Recently",
                    desc: "Scans show thinning of the cortex in children who use screens for more than 7 hours a day.",
                    task: "1. Harm: If false, this creates unnecessary guilt/anxiety. If true, we need to know.",
                    subtext: "Find the primary source (NIH or similar). Verify the details.",
                    localFilename: "grade8_brain_scan.jpg"
                },
                {
                    id: "8-3",
                    title: "Copyright Hoax (FALSE)",
                    headline: "Instagram Update: You Must Repost This Legal Notice or Meta Owns Your Photos",
                    source: "Social-Media-Chain-Mail",
                    time: "Viral",
                    desc: "Influencers are sharing a 'legal block' of text claiming it protects their copyright from the new Terms of Service.",
                    task: "1. Harm: Low physical harm, but spreads ignorance about how laws work.",
                    subtext: "Search keywords regarding 'Instagram copyright hoax'.",
                    localFilename: "grade8_copyright.jpg"
                },
                {
                    id: "8-4",
                    title: "Gang High Beams (FALSE)",
                    headline: "Police Warning: If a Car Flashes High Beams at You, Do NOT Flash Back (Gang Initiation)",
                    source: "Neighborhood-Safety-Watch",
                    time: "Recurring",
                    desc: "An urban legend claims that flashing your lights at a car with no lights on marks you as a target for a gang initiation killing.",
                    task: "1. Harm: High. Causes fear of strangers and unsafe driving habits.",
                    subtext: "Check Snopes or police fact sheets. Is this an urban legend?",
                    localFilename: "grade8_high_beams.jpg"
                },
                {
                    id: "8-5",
                    title: "Microplastics Blood (TRUE)",
                    headline: "Environmental Discovery: Scientists Find Microplastics in Human Blood for the First Time",
                    source: "Global-Science-Nature",
                    time: "Last Year",
                    desc: "A Dutch study found plastic particles in the blood of 80% of people tested.",
                    task: "1. Harm: Health anxiety. 2. Verify: Is this reputable science or alarmism?",
                    subtext: "Search for the specific study (Netherlands / Vrije Universiteit).",
                    localFilename: "grade8_microplastics.jpg"
                }
            ]
        };

        // DOM Elements
        const gradeSelect = document.getElementById('grade-select');
        const scenarioSelect = document.getElementById('scenario-select');
        const headline = document.getElementById('news-headline');
        const desc = document.getElementById('news-desc');
        const sourceMock = document.getElementById('source-mock');
        const task = document.getElementById('investigation-task');
        const taskSubtext = document.getElementById('task-subtext');
        const image = document.getElementById('news-image');
        const container = document.getElementById('card-container');
        const copyHeadlineBtn = document.getElementById('copy-headline-btn');

        // Modal Elements
        const modal = document.getElementById('info-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');
        const infoBtn = document.getElementById('info-btn');
        const modalClose = document.getElementById('modal-close');
        const modalDismiss = document.getElementById('modal-dismiss');
        const modalOverlay = document.getElementById('modal-overlay');

        // State
        let currentGrade = "6";

        // Initialize App
        function init() {
            populateScenarioDropdown(currentGrade);
            loadScenario(0);
            lucide.createIcons();
        }

        // Modal Functions
        function showGradeInfo() {
            const info = gradeInfoData[currentGrade];
            if (info) {
                modalTitle.textContent = info.title;
                modalContent.innerHTML = info.content;
                modal.classList.remove('hidden');
                // Trap focus logic could go here for full accessibility
            }
        }

        function hideGradeInfo() {
            modal.classList.add('hidden');
        }

        // Update Scenario Dropdown based on Grade
        function populateScenarioDropdown(grade) {
            // Clear existing
            scenarioSelect.innerHTML = '';
            
            const scenarios = scenarioData[grade];
            
            if (scenarios.length === 0) {
                // Handle empty grade
                const opt = document.createElement('option');
                opt.textContent = "No content available";
                scenarioSelect.appendChild(opt);
                scenarioSelect.disabled = true;
                return;
            } else {
                scenarioSelect.disabled = false;
            }
            
            scenarios.forEach((item, index) => {
                const opt = document.createElement('option');
                opt.value = index;
                opt.textContent = item.title;
                scenarioSelect.appendChild(opt);
            });
        }

        // Load specific scenario data
        function loadScenario(index) {
            // Guard clause for empty data
            if (!scenarioData[currentGrade] || scenarioData[currentGrade].length === 0) {
                headline.textContent = "Content Unavailable";
                desc.textContent = "There are no scenarios currently loaded for this grade level.";
                sourceMock.textContent = "System System";
                task.textContent = "Select a different grade level.";
                taskSubtext.textContent = "";
                image.src = "https://placehold.co/600x400/e2e8f0/64748b?text=No+Data";
                return;
            }

            const scenario = scenarioData[currentGrade][index];
            
            // Fade Out
            container.style.opacity = '0.5';
            
            setTimeout(() => {
                // Update Text Content
                headline.textContent = scenario.headline;
                desc.textContent = scenario.desc;
                sourceMock.textContent = `${scenario.source} • ${scenario.time}`;
                task.textContent = scenario.task;
                taskSubtext.textContent = scenario.subtext;
                
                // Update Image with Local File Logic
                // We attempt to load the local file. 
                // The onerror handler creates a helpful placeholder if the file is missing locally.
                image.onerror = function() {
                    this.onerror = null; // Prevent infinite loop
                    // Generates a placeholder image showing the missing filename for debugging/setup
                    this.src = `https://placehold.co/600x400/e2e8f0/64748b?text=File+Missing:+${scenario.localFilename}`;
                };
                image.src = scenario.localFilename; // Assumes root folder
                
                // Fade In
                container.style.opacity = '1';
            }, 150);
        }

        // Event Listeners
        gradeSelect.addEventListener('change', (e) => {
            currentGrade = e.target.value;
            populateScenarioDropdown(currentGrade);
            loadScenario(0); // Reset to first card of new grade
        });

        scenarioSelect.addEventListener('change', (e) => {
            loadScenario(e.target.value);
        });

        infoBtn.addEventListener('click', showGradeInfo);
        modalClose.addEventListener('click', hideGradeInfo);
        modalDismiss.addEventListener('click', hideGradeInfo);
        modalOverlay.addEventListener('click', hideGradeInfo);

        // Close on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
                hideGradeInfo();
            }
        });

        // Copy Headline Functionality
        copyHeadlineBtn.addEventListener('click', () => {
            const textToCopy = headline.textContent;
            navigator.clipboard.writeText(textToCopy).then(() => {
                const icon = copyHeadlineBtn.querySelector('i');
                const originalIcon = icon.getAttribute('data-lucide');

                // Change icon to checkmark temporarily
                // We need to re-render the icon, Lucide works by replacing the i tag with an svg.
                // A simpler way with Lucide is to replace the SVG content or classes,
                // but since Lucide replaces the <i> tag, we should just toggle a class or change innerHTML carefully.
                // However, the easiest way with the CDN script is to reset the innerHTML of the button to a check icon

                copyHeadlineBtn.innerHTML = '<i data-lucide="check" class="w-4 h-4 text-green-600"></i>';
                lucide.createIcons();

                setTimeout(() => {
                    copyHeadlineBtn.innerHTML = '<i data-lucide="copy" class="w-4 h-4"></i>';
                    lucide.createIcons();
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy text: ', err);
            });
        });

        // Start
        init();

    </script>
</body>
</html>
